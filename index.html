import json
import os
from datetime import datetime

def main():
    print("\n=== Updating HTML ===\n")
    
    # Load news
    if not os.path.exists('news_data.json'):
        print("‚ùå No news_data.json found!")
        return
    
    with open('news_data.json', 'r', encoding='utf-8') as f:
        news = json.load(f)
    
    # Check audio files
    audio_files = []
    for i in range(50):
        if os.path.exists(f'audio/news_{i}.mp3'):
            audio_files.append(i)
    
    print(f"üì∞ News items: {len(news)}")
    print(f"üéôÔ∏è Audio files: {len(audio_files)}")
    
    # Read HTML
    with open('index.html', 'r', encoding='utf-8') as f:
        html = f.read()
    
    # Find and replace news data
    news_json = json.dumps(news[:50], ensure_ascii=False)
    audio_json = json.dumps(audio_files)
    
    # Find the start and end of news array
    news_start = html.find('const news=[{"title": "India is teaching Google how AI in education can scale", "source": "TechCrunch", "summary": "With the highest global usage of Gemini for learning, India is emerging as a key market shaping Google's approach to AI in education.", "url": "https://techcrunch.com/2026/01/29/india-is-teaching-google-how-ai-in-education-can-scale/", "date": "2026-01-29"}, {"title": "Flapping Airplanes and the promise of research-driven AI", "source": "TechCrunch", "summary": "A new AI lab called Flapping Airplanes launched yesterday, and a Sequoia partner has an interesting take on why they stand out.", "url": "https://techcrunch.com/2026/01/29/flapping-airplanes-and-the-promise-of-research-driven-ai/", "date": "2026-01-29"}, {"title": "Google Maps now lets you access Gemini while walking and cycling", "source": "TechCrunch", "summary": "When you're walking around and navigating with Maps, you can now ask Gemini questions like \"What neighborhood am I in?\" or \"What are top-rated restaurants nearby?\"", "url": "https://techcrunch.com/2026/01/29/google-maps-now-lets-you-access-gemini-while-walking-and-cycling/", "date": "2026-01-29"}, {"title": "Zuckerberg teases agentic commerce tools and major AI rollout in 2026", "source": "TechCrunch", "summary": "Mark Zuckerberg says 2026 will be \"a big year for delivering personal super intelligence.\"", "url": "https://techcrunch.com/2026/01/28/zuckerberg-teases-agentic-commerce-tools-and-major-ai-rollout-in-2026/", "date": "2026-01-29"}, {"title": "Mark Zuckerberg says a future without smart glasses is ‚Äòhard to imagine‚Äô", "source": "TechCrunch", "summary": "Take Zuckerberg's outlook with a grain of salt. After all, he thought we'd all be hanging out in the metaverse by now.", "url": "https://techcrunch.com/2026/01/28/mark-zuckerberg-future-smart-glasses/", "date": "2026-01-29"}, {"title": "Tesla to invest $2B in Elon Musk‚Äôs xAI", "source": "TechCrunch", "summary": "Elon Musk's AI company xAI disclosed earlier this month it had raised $20 billion.", "url": "https://techcrunch.com/2026/01/28/tesla-invested-2b-in-elon-musks-xai/", "date": "2026-01-29"}, {"title": "Elon Musk teases a new image-labeling system for X‚Ä¶ we think?", "source": "TechCrunch", "summary": "Elon Musk says X will begin identifying \"manipulated media\" but doesn't share details.", "url": "https://techcrunch.com/2026/01/28/elon-musk-teases-a-new-image-labeling-system-for-xwe-think/", "date": "2026-01-29"}, {"title": "ServiceNow inks another AI partnership, this time with Anthropic", "source": "TechCrunch", "summary": "ServiceNow partners with Anthropic just a week after announcing a partnership with OpenAI as the company takes a multi-model approach.", "url": "https://techcrunch.com/2026/01/28/servicenow-inks-another-ai-partnership-this-time-with-anthropic/", "date": "2026-01-29"}, {"title": "The Download: inside the Vitalism movement, and why AI‚Äôs ‚Äúmemory‚Äù is a privacy problem", "source": "MIT Tech Review", "summary": "This is today&#8217;s edition of The Download, our weekday newsletter that provides a daily dose of what&#8217;s going on in the world of technology. Meet the Vitalists: the hardcore longevity enthusiasts who believe death is ‚Äúwrong‚Äù Last April, an excited crowd gathered at a compound in Berkeley, California, for a three-day event called the Vitalist Bay Summit.&#8230;", "url": "https://www.technologyreview.com/2026/01/29/1131925/the-download-inside-the-vitalism-movement-and-why-ais-memory-is-a-privacy-problem/", "date": "2026-01-29"}, {"title": "How the grid can ride out winter storms", "source": "MIT Tech Review", "summary": "The eastern half of the US saw a monster snowstorm over the weekend. The good news is the grid has largely been able to keep up with the freezing temperatures and increased demand. But there were some signs of strain, particularly for fossil-fuel plants. One analysis found that PJM, the nation‚Äôs largest grid operator, saw&#8230;", "url": "https://www.technologyreview.com/2026/01/29/1131863/grid-winter-storms/", "date": "2026-01-29"}, {"title": "Meet the Vitalists: the hardcore longevity enthusiasts who believe death is ‚Äúwrong‚Äù", "source": "MIT Tech Review", "summary": "‚ÄúWho here believes involuntary death is a good thing?‚Äù&#160; Nathan Cheng has been delivering similar versions of this speech over the last couple of years, so I knew what was coming. He was about to try to convince the 80 or so people in the audience that death is bad. And that defeating it should&#8230;", "url": "https://www.technologyreview.com/2026/01/29/1131815/vitalism-longevity-enthusiasts-influence/", "date": "2026-01-29"}, {"title": "Roundtables: Why AI Companies Are Betting on Next-Gen Nuclear", "source": "MIT Tech Review", "summary": "AI is driving unprecedented investment for massive data centers and an energy supply that can support its huge computational appetite. One potential source of electricity for these facilities is next-generation nuclear power plants, which could be cheaper to construct and safer to operate than their predecessors. Watch a discussion with our editors and reporters on&#8230;", "url": "https://www.technologyreview.com/2026/01/28/1131340/roundtables-why-ai-companies-are-betting-on-next-gen-nuclear/", "date": "2026-01-29"}, {"title": "What AI ‚Äúremembers‚Äù about you is privacy‚Äôs next frontier", "source": "MIT Tech Review", "summary": "The ability to remember you and your preferences is rapidly becoming a big selling point for AI chatbots and agents.&#160; Earlier this month, Google announced Personal Intelligence, a new way for people to interact with the company‚Äôs Gemini chatbot that draws on their Gmail, photos, search, and YouTube histories to make Gemini ‚Äúmore personal, proactive,&#8230;", "url": "https://www.technologyreview.com/2026/01/28/1131835/what-ai-remembers-about-you-is-privacys-next-frontier/", "date": "2026-01-29"}, {"title": "Rules fail at the prompt, succeed at the boundary", "source": "MIT Tech Review", "summary": "From the Gemini Calendar prompt-injection attack of 2026 to the September 2025 state-sponsored hack using Anthropic‚Äôs Claude code as an automated intrusion engine, the coercion of human-in-the-loop agentic actions and fully autonomous agentic workflows are the new attack vector for hackers. In the Anthropic case, roughly 30 organizations across tech, finance, manufacturing, and government were&#82", "url": "https://www.technologyreview.com/2026/01/28/1131003/rules-fail-at-the-prompt-succeed-at-the-boundary/", "date": "2026-01-29"}, {"title": "The Download: A bid to treat blindness, and bridging the internet divide", "source": "MIT Tech Review", "summary": "This is today&#8217;s edition of The Download, our weekday newsletter that provides a daily dose of what&#8217;s going on in the world of technology. The first human test of a rejuvenation method will begin ‚Äúshortly‚Äù Life Biosciences, a small Boston startup founded by Harvard professor and life-extension evangelist David Sinclair, has won FDA approval to proceed with&#8230;", "url": "https://www.technologyreview.com/2026/01/28/1131830/the-download-a-bid-to-treat-blindness-and-bridging-the-internet-divide/", "date": "2026-01-29"}, {"title": "The first human test of a rejuvenation method will begin ‚Äúshortly‚Äù", "source": "MIT Tech Review", "summary": "When Elon Musk was at Davos last week, an interviewer asked him if he thought aging could be reversed. Musk said he hasn‚Äôt put much time into the problem but suspects it is ‚Äúvery solvable‚Äù and that when scientists discover why we age, it‚Äôs going to be something ‚Äúobvious.‚Äù Not long after, the Harvard professor&#8230;", "url": "https://www.technologyreview.com/2026/01/27/1131796/the-first-human-test-of-a-rejuvenation-method-will-begin-shortly/", "date": "2026-01-29"}, {"title": "Sen. Warren pushes Altman for guarantee OpenAI isn‚Äôt seeking government bailout", "source": "The Verge", "summary": "Senator Elizabeth Warren (D-MA) is pushing OpenAI for assurances it won't seek a government bailout if it doesn't turn a profit. In a letter to CEO Sam Altman, Warren says she is concerned that the company is preparing to fall back \"on the classic strategy of privatizing profits and socializing losses\" amid soaring spending and [&#8230;]", "url": "https://www.theverge.com/news/869983/elizabeth-warren-openai-sam-altman-bailout-letter", "date": "2026-01-29"}, {"title": "Mark Zuckerberg is all in on AI as the new social media", "source": "The Verge", "summary": "Meta CEO Mark Zuckerberg's metaverse dreams seem to have been replaced by a new vision: an AI-generated social feed. In an earnings call on Wednesday, Zuckerberg reiterated his belief that AI will become the next big media format, making feeds \"more immersive and interactive:\" We started with text, and then moved to photos when we [&#8230;]", "url": "https://www.theverge.com/news/869882/mark-zuckerberg-meta-earnings-q4-2025", "date": "2026-01-29"}, {"title": "Google adds Gemini AI-powered ‚Äòauto browse‚Äô to Chrome", "source": "The Verge", "summary": "Google is launching a new \"auto browse\" feature inside Chrome that can perform multi-step tasks on your behalf. The Gemini AI-powered capability is coming to Google AI Pro and Ultra subscribers in the US, and can do things like research hotel and flight costs, schedule appointments, fill out online forms, manage subscriptions, and more. The [&#8230;]", "url": "https://www.theverge.com/news/869731/google-gemini-ai-chrome-auto-browse", "date": "2026-01-29"}, {"title": "YouTube&#8217;s top AI slop channels are disappearing", "source": "The Verge", "summary": "YouTube appears to have taken down two of the most popular AI slop channels on its platform, along with several others. A report from Kapwing found that a channel called CuentosFacianantes no longer exists on the platform after amassing more than 5.9 million subscribers and over 1.2 billion total views. In a November 2025 report, [&#8230;]", "url": "https://www.theverge.com/news/869684/youtube-top-ai-channels-removed-kapwing", "date": "2026-01-29"}, {"title": "I used Claude to vibe-code my wildly overcomplicated smart home", "source": "The Verge", "summary": "I am not, by any definition, a coder, but when I started seeing people's vibe-coded smart home projects all over my social feeds this month, I was intrigued. From a \"master command center\" built on a Lutron system to AI controlling a smart oven, people were unleashing AI in their smart homes, using Claude Code [&#8230;]", "url": "https://www.theverge.com/report/869318/claude-vibe-coding-home-assistant-smart-home", "date": "2026-01-29"}, {"title": "Grok is the most antisemitic chatbot according to the ADL", "source": "The Verge", "summary": "Across six top large language models, xAI's Grok performed the worst at identifying and countering antisemitic content, according to a study published Wednesday by the Anti-Defamation League. On the other end of the spectrum, Anthropic's Claude performed the best according to the report's metrics, but the ADL said all models had gaps that required improvement. [&#8230;]", "url": "https://www.theverge.com/news/868925/adl-ai-antisemitism-report-grok-chatgpt-gemini-claude-deepseek-llama-elon-musk", "date": "2026-01-29"}, {"title": "Astronomers used AI to find 1,400 ‚Äòanomalous objects‚Äô from Hubble archives", "source": "The Verge", "summary": "A pair of astronomers at the European Space Agency (ESA) discovered more than 800 previously undocumented \"astrophysical anomalies\" hiding in Hubble's archives. To do so, researchers David O'Ryan and Pablo G&#243;mez trained an AI model to comb through Hubble's 35-year dataset, hunting for strange objects and flagging them for manual review. It's \"a treasure trove [&#8230;]", "url": "https://www.theverge.com/news/869182/astronomers-ai-discover-cosmic-anomalies-hubble-archives", "date": "2026-01-29"}, {"title": "Meta is spending millions to convince people that data centers are cool and you like them", "source": "The Verge", "summary": "Over the last few months of 2025, Meta spent $6.4 million on an ad campaign running in cities across the country, from Sacramento to Washington, with a clear mission: win over viewers on the construction of new data centers. As the New York Times reports, the ad campaign is anchored by short, folksy video spotlights [&#8230;]", "url": "https://www.theverge.com/news/869008/meta-data-centers-ad-campaign", "date": "2026-01-29"}, {"title": "Data Centers Are Driving a US Gas Boom", "source": "Wired", "summary": "Gas projects in the US pipeline explicitly linked to data centers increased by almost 25 times over the past two years, according to new research from Global Energy Monitor.", "url": "https://www.wired.com/story/data-centers-are-driving-a-us-gas-boom/", "date": "2026-01-29"}, {"title": "ICE Is Using Palantir‚Äôs AI Tools to Sort Through Tips", "source": "Wired", "summary": "ICE has been using an AI-powered Palantir system to summarize tips sent to its tip line since last spring, according to a newly released Homeland Security document.", "url": "https://www.wired.com/story/ice-is-using-palantirs-ai-tools-to-sort-through-tips/", "date": "2026-01-29"}, {"title": "The Doomsday Clock Is Now 85 Seconds to Midnight. Here‚Äôs What That Means", "source": "Wired", "summary": "Catastrophic risks are increasing, cooperation is declining, and swift action is needed from global leaders to correct course.", "url": "https://www.wired.com/story/the-doomsday-clock-is-now-85-seconds-to-midnight-heres-what-that-means/", "date": "2026-01-29"}, {"title": "Moltbot Is Taking Over Silicon Valley", "source": "Wired", "summary": "People are letting the viral AI assistant formerly known as Clawdbot run their lives, regardless of the privacy concerns.", "url": "https://www.wired.com/story/clawdbot-moltbot-viral-ai-assistant/", "date": "2026-01-29"}, {"title": "Google‚Äôs New Chrome ‚ÄòAuto Browse‚Äô Agent Attempts to Roam the Web Without You", "source": "Wired", "summary": "Google‚Äôs latest addition to its Chrome browser puts generative AI behind the wheel and you in the passenger seat.", "url": "https://www.wired.com/story/google-chrome-auto-browse/", "date": "2026-01-29"}, {"title": "Amazon Alexa+ Is Becoming Available to Everyone. Here‚Äôs How to Turn It Off (2026)", "source": "Wired", "summary": "Alexa+ has been rolling out to everyone with a Prime membership, even if you didn‚Äôt ask for it. Here‚Äôs how to change it back.", "url": "https://www.wired.com/story/alexa-plus-early-access-rollout-2026/", "date": "2026-01-29"}, {"title": "The State-Led Crackdown on Grok and xAI Has Begun", "source": "Wired", "summary": "At least 37 attorneys general for US states and territories are taking action against xAI after Grok generated a flood of nonconsensual sexual images of women and minors.", "url": "https://www.wired.com/story/the-state-led-crackdown-on-grok-and-xai-has-begun/", "date": "2026-01-29"}, {"title": "Google DeepMind Staffers Ask Leaders to Keep Them ‚ÄòPhysically Safe‚Äô From ICE", "source": "Wired", "summary": "A federal agent allegedly tried to enter Google‚Äôs Cambridge campus in the fall, WIRED has learned. Now, staffers want policies that protect them from immigration officials.", "url": "https://www.wired.com/story/google-deepmind-staffers-ice-office-questions-safety/", "date": "2026-01-29"}, {"title": "Site catering to online criminals has been seized by the FBI", "source": "Ars Technica", "summary": "One of the last holdouts for ransomware discussions, RAMP is taken down.", "url": "https://arstechnica.com/security/2026/01/site-catering-to-online-criminals-has-been-seized-by-the-fbi/", "date": "2026-01-29"}, {"title": "Report: China approves import of high-end Nvidia AI chips after weeks of uncertainty", "source": "Ars Technica", "summary": "Over 400,000 H200 chips coming to tech giants as China tries to balance tech needs with self-reliance.", "url": "https://arstechnica.com/ai/2026/01/report-china-approves-import-of-high-end-nvidia-ai-chips-after-weeks-of-uncertainty/", "date": "2026-01-29"}, {"title": "Users flock to open source Moltbot for always-on AI, despite major risks", "source": "Ars Technica", "summary": "The open source \"Jarvis\" chats via WhatsApp but requires access to your files and accounts.", "url": "https://arstechnica.com/ai/2026/01/viral-ai-assistant-moltbot-rapidly-gains-popularity-but-poses-security-risks/", "date": "2026-01-29"}, {"title": "There's a rash of scam spam coming from a real Microsoft address", "source": "Ars Technica", "summary": "Abusing Microsoft's reputation may make scam harder to spot.", "url": "https://arstechnica.com/information-technology/2026/01/theres-a-rash-of-scam-spam-coming-from-a-real-microsoft-address/", "date": "2026-01-29"}, {"title": "OpenAI spills technical details about how its AI coding agent works", "source": "Ars Technica", "summary": "Unusually detailed post explains how OpenAI handles the Codex agent loop.", "url": "https://arstechnica.com/ai/2026/01/openai-spills-technical-details-about-how-its-ai-coding-agent-works/", "date": "2026-01-29"}, {"title": "Why has Microsoft been routing example.com traffic to a company in Japan?", "source": "Ars Technica", "summary": "Company's autodiscover caused users' test credentials to be sent outside Microsoft networks.", "url": "https://arstechnica.com/information-technology/2026/01/odd-anomaly-caused-microsofts-network-to-mishandle-example-com-traffic/", "date": "2026-01-29"}, {"title": "Overrun with AI slop, cURL scraps bug bounties to ensure \"intact mental health\"", "source": "Ars Technica", "summary": "The onslaught includes LLMs finding bogus vulnerabilities and code that won't compile.", "url": "https://arstechnica.com/security/2026/01/overrun-with-ai-slop-curl-scraps-bug-bounties-to-ensure-intact-mental-health/", "date": "2026-01-29"}, {"title": "eBay bans illicit automated shopping amid rapid rise of AI agents", "source": "Ars Technica", "summary": "New policy requires \"buy for me\" AI tools and chatbots to obtain permission before accessing the platform.", "url": "https://arstechnica.com/information-technology/2026/01/ebay-bans-illicit-automated-shopping-amid-rapid-rise-of-ai-agents/", "date": "2026-01-29"}];)
    news_end = html.find('];', news_start)
    if news_end == -1:
        print("‚ùå Could not find end of news array")
        return
    
    # Replace news data
    new_html = html[:news_start] + f'const news={news_json}' + html[news_end+1:]
    
    # Find and replace audioFiles
    audio_start = new_html.find('const audioFiles=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39];', audio_start)
        if audio_end != -1:
            new_html = new_html[:audio_start] + f'const audioFiles={audio_json}' + new_html[audio_end+1:]
    
    # Update timestamp
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M UTC")
    new_html = new_html.replace('Last updated: Loading...', f'Last updated: {timestamp}')
    
    # Also try to update existing timestamp
    import re
    new_html = re.sub(r'Last updated: \d{4}-\d{2}-\d{2} \d{2}:\d{2} UTC', f'Last updated: {timestamp}', new_html)
    
    # Write HTML
    with open('index.html', 'w', encoding='utf-8') as f:
        f.write(new_html)
    
    print(f"‚úÖ HTML updated!")
    print(f"‚úÖ News: {len(news[:50])} items")
    print(f"‚úÖ Audio: {len(audio_files)} files")
    print(f"‚è∞ Timestamp: {timestamp}\n")

if __name__ == "__main__":
    main()
